{"version":3,"sources":["webpack:///./src/app/client/demo/demo.component.css","webpack:///./src/app/client/demo/demo.component.html","webpack:///./src/app/client/demo/demo.component.ts","webpack:///./src/app/client/demo/demo.module.ts","webpack:///./src/app/client/demo/demo.routes.ts"],"names":[],"mappings":";;;;;;;;;AAAA,mB;;;;;;;;;;;ACAA,sYAAsY,okCAAokC,iBAAiB,i1BAAi1B,wCAAwC,uBAAuB,gBAAgB,m2BAAm2B,MAAM,sOAAsO,MAAM,mOAAmO,MAAM,wOAAwO,MAAM,sOAAsO,MAAM,yd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAhkI;AAC3B;AACY;AACE;AAC3B;AACZ;AACgC;AAiB/D;IA6BE,uBACU,IAAwB,EACxB,MAAqB,EACrB,IAAwB,EACxB,MAAc,EACd,OAAuB,EACvB,OAAoB;QALpB,SAAI,GAAJ,IAAI,CAAoB;QACxB,WAAM,GAAN,MAAM,CAAe;QACrB,SAAI,GAAJ,IAAI,CAAoB;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAgB;QACvB,YAAO,GAAP,OAAO,CAAa;QAjC9B,iBAAY,GAAa,KAAK;QAI9B,cAAS,GAAU,EAAE;QACrB,qBAAgB,GAAW,EAAE;QAE7B,iBAAY,GAAW,EAAE;QACzB,YAAO,GAAY,KAAK;QACxB,mBAAc,GAAY,CAAC;QAC3B,iBAAY,GAAc,KAAK;QAC/B,kBAAa,GAAc,IAAI;QAC/B,UAAK,GAAW,CAAC;QACjB,WAAM,GAAS,EAAE;QACjB,cAAS,GAAW,EAAE;QACtB,mBAAc,GAAY,CAAC,CAAC;QAC5B,kBAAa,GAAa,EAAE;QAC5B,SAAI,GAAa,KAAK;QACtB,UAAK,GAAS,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;QAG3C,aAAQ,GAAW,CAAC;QACpB,SAAI,GAAG,IAAI,QAAQ,EAAE,CAAC;QAapB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC;QAC5D,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;IAC1B,CAAC;IAED,gCAAQ,GAAR;QAAA,iBAgCC;QA9BC,IAAI,CAAC,WAAW,EAAE;QAClB,IAAI,CAAC,IAAI,EAAE;QAEX,kBAAkB;QAClB,UAAU;QACV,IAAI,GAAG,GAAG,EAAC,IAAI,EAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,aAAa,EAAE,IAAI,CAAC,YAAY,EAAE,OAAO,EAAE,gBAAgB,EAAC;QAC3I,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;QAEnB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,aAAG;YAE9B,EAAE,EAAC,GAAG,CAAC,IAAI,KAAK,kBAAkB,CAAC,EAAC;gBAClC,UAAU,CAAC;oBACT,KAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;oBACxC,KAAI,CAAC,SAAS,CAAC,EAAC,SAAS,EAAE,WAAW,EAAC,CAAC;gBAC1C,CAAC,EAAC,IAAI,CAAC;YACT,CAAC;YAED,EAAE,EAAC,GAAG,CAAC,IAAI,KAAK,WAAW,CAAC,EAAC;gBAC3B,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK;YACjC,CAAC;YAED,EAAE,EAAC,GAAG,CAAC,IAAI,KAAK,MAAM,CAAC,EAAC;gBACtB,KAAI,CAAC,cAAc,EAAE;gBACrB,EAAE,EAAC,KAAI,CAAC,cAAc,KAAK,CAAC,CAAC,EAAC;oBAC5B,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,4CAA4C,EAAC,aAAa,CAAC;oBAC/E,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;gBAC/C,CAAC;YACH,CAAC;QACH,CAAC,CAAC;IAEJ,CAAC;IAED,iCAAS,GAAT;QAAA,iBA2BC;QA1BC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC;QACjE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC;QAEjE,IAAI,CAAC,aAAa,EAAE;QAEpB,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE1E,aAAa,CAAC,YAAY,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,EAAE,UAAC,MAAM;YAC3D,IAAI,CAAC;gBACD,KAAI,CAAC,MAAM,CAAC,GAAG,GAAG,aAAa,CAAC,GAAG,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;gBAC5D,KAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,cAAK,YAAI,CAAC,YAAY,GAAG,IAAI,EAAxB,CAAwB,CAAC,CAAC;gBACvE,KAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,cAAK,YAAI,CAAC,YAAY,GAAG,KAAK,EAAzB,CAAyB,CAAC,CAAC;YAC3E,CAAC;YAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACb,KAAI,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC;gBACzB,KAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,cAAK,YAAI,CAAC,YAAY,GAAG,IAAI,EAAxB,CAAwB,CAAC,CAAC;gBACvE,KAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,cAAK,YAAI,CAAC,YAAY,GAAG,KAAK,EAAzB,CAAyB,CAAC,CAAC;YAC3E,CAAC;YACD,UAAU,CAAC;gBACT,KAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YACrB,CAAC,EAAE,GAAG,CAAC,CAAC;QACZ,CAAC,EAAE,UAAU,KAAK;YACd,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;YACpB,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;YACjB,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;YACpD,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qCAAa,GAAb;QACE,IAAI,CAAC,aAAa,EAAE;IACtB,CAAC;IAED,qCAAa,GAAb;QACE,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAClE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QAC5E,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,EAAE,EAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC;gBACpB,IAAI,CAAC,QAAQ,EAAE,CAAC;gBAChB,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;YACnD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;YACrC,CAAC;QACL,CAAC;IACH,CAAC;IAED,yCAAiB,GAAjB,UAAkB,KAAY,EAAE,MAAc;QAE1C,IAAI,WAAW,GAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;QACrC,IAAI,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QACtC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAExC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,cAAc,CAAC;QACpC,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,cAAc,CAAC;QAEtC,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAE3D,0BAA0B;QAE1B,IAAI,QAAQ,GAAG;YACX,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QAC7B,CAAC;QAED,IAAI,CAAC,OAAO,GAAG,IAAI,QAAQ,EAAE;QAE7B,qDAAqD;QACrD,yDAAyD;QACzD,0DAA0D;QAE1D,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC5B,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC5B,aAAa,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAE9D,CAAC;IAED,4BAAI,GAAJ;QAAA,iBA6CC;QA5CC,aAAa,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAE1D,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QAEtB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC1D,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAChD,IAAI,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;YAEtD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;YAC7B,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;YAChE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAE5B,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,GAAC,CAAC,CAAC;YACnC,IAAI,WAAW,GAAG,CAAC,CAAC,GAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YAE7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;YAC9B,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC;YACvE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAE7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;YAC9B,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa,GAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,GAAC,CAAC,CAAC,CAAC;YAC5G,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAE7B,+BAA+B;YAC/B,IAAI,QAAQ,GAAG,IAAI,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACtD,IAAI,KAAK,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;YACzB,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC;YACnD,OAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;gBACb,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC1B,QAAQ,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC;YACzD,CAAC;YAED,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEvC,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;YACrC,KAAK,CAAC,WAAW,GAAG,WAAW;YAC/B,KAAK,CAAC,KAAK,GAAG,GAAG;YACjB,KAAK,CAAC,MAAM,GAAG,GAAG;YAClB,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YAEnD,KAAK,CAAC,MAAM,GAAG;;oBACb,IAAI,CAAC,OAAO,EAAE;;;iBACf;QACT,CAAC;IACH,CAAC;IAED,mCAAW,GAAX;QAAA,iBAiBC;QAhBC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAC7C,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;QAE3C,CAAC,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACnC,wCAAwC;QAExC,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAC,CAAC;aAC/D,IAAI,CAAC,UAAC,MAAM;YACX,KAAI,CAAC,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC;YAC9B,KAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC;YACvB,KAAI,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,CAAC;YAExB,KAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,SAAS,EAAE,cAAK,YAAI,CAAC,YAAY,GAAG,IAAI,EAAxB,CAAwB,CAAC,CAAC;YACtE,KAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,QAAQ,EAAE,cAAK,YAAI,CAAC,YAAY,GAAG,KAAK,EAAzB,CAAyB,CAAC,CAAC;QACxE,CAAC,CAAC;IACJ,CAAC;IAID,iCAAS,GAAT,UAAU,IAAI;QACZ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IACzB,CAAC;IAED,4CAAoB,GAApB,UAAqB,IAAI;QAEvB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;QACjB,IAAM,UAAU,GAAG,qEAAW,CAAC,GAAG,GAAC,YAAY,GAAC,IAAI,CAAC,KAAK;QAE1D,IAAI,IAAI,GAAG,SAAO,IAAI,CAAC,KAAK,UAAO;QAEnC,IAAI,QAAQ,GAAG,gBAAa,qEAAW,CAAC,GAAG,kBAAa,IAAI,CAAC,MAAM,wBAAkB;QAErF,CAAC,CAAC,YAAY,CAAC,CAAC,KAAK,EAAE;QACvB,CAAC,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;QAC1B,CAAC,CAAC,gBAAgB,CAAC,CAAC,IAAI,EAAE;QAC1B,CAAC,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC;QAElC,IAAI,CAAC,OAAO,GAAG,KAAK;QAEpB,IAAI,CAAC,YAAY,GAAG,KAAK;IAE3B,CAAC;IAED,uCAAe,GAAf;QACE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,EAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAE,CAAC,CAAC;IACnF,CAAC;IAED,oCAAY,GAAZ;QACC,IAAI,CAAC,aAAa,GAAG,EAAE;IACxB,CAAC;IAED,4BAAI,GAAJ;QAAA,iBAUC;QATC,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,EAAC;YAChC,IAAI,CAAC,SAAS,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAG,IAAI,EAAE,IAAI,CAAC,aAAa,EAAC,CAAC;YACzE,UAAU,CAAC;gBACT,KAAI,CAAC,SAAS,CAAC,EAAC,SAAS,EAAE,WAAW,EAAC,CAAC;YAC1C,CAAC,EAAC,GAAG,CAAC;YACN,IAAI,CAAC,IAAI,EAAE;QACb,CAAC;QAAA,IAAI,EAAC;YACH,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,2CAA2C,CAAC;QACjE,CAAC;IACH,CAAC;IAGD,4BAAI,GAAJ;QAAA,iBA0EC;QAxEG,IAAI,IAAI,GAAG,IAAI;QAEf,IAAM,iBAAiB,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE;QAC1D,IAAM,YAAY,GAAQ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;QACvD,qDAAQ,CAAC;YACP,iBAAiB;YACjB,YAAY;SACb,CAAC,CAAC,SAAS,CAAE,UAAM,GAAG;;;;;wBAErB,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC;wBACvB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI;6BAEpB,KAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,GAAzB,wBAAyB;6BAEtB,GAAE,IAAI,IAAI,GAAV,wBAAU;wBACZ,qBAAM,IAAI,OAAO,CAAC,iBAAO,IAAI,iBAAU,CAAC,OAAO,EAAE,IAAI,CAAC,EAAzB,CAAyB,CAAC;;wBAAvD,SAAuD,CAAC;;;wBAG1D,IAAI,CAAC,GAAG,GAAG,IAAI,oBAAoB,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;wBAClF,qBAAM,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE;;wBAArB,SAAqB,CAAC;wBAElB,GAAG,GAAG,CAAC,CAAC;wBACR,IAAI,GAAG,CAAC,CAAC;wBAGb,IAAI,CAAC,SAAS,CAAC,OAAO,CAAE,UAAe,CAAC,EAAC,CAAC;;;oCACxC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,UAAe,EAAE,EAAC,EAAE;;;;;gDAErC,QAAQ,GAAM,qEAAW,CAAC,GAAG,wBAAmB,EAAE,CAAC,WAAa;gDAEhE,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;gDACzC,KAAK,CAAC,WAAW,GAAG,WAAW;gDAC/B,KAAK,CAAC,KAAK,GAAG,GAAG;gDACjB,KAAK,CAAC,MAAM,GAAG,GAAG;gDAClB,KAAK,CAAC,EAAE,GAAG,WAAS,IAAM;gDAC1B,KAAK,CAAC,OAAO,CAAC,YAAY,GAAG,KAAG,GAAK;gDACrC,KAAK,CAAC,GAAG,GAAG,QAAQ;gDAEpB,KAAK,CAAC,MAAM,GAAG;;;;;gEACT,WAAW,GAAG,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC;gEACtC,qBAAM,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;;gEAAvC,SAAuC,CAAC;gEAExC,EAAE,EAAC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,EAAC;oEAClC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gEAC/C,CAAC;gEAED,EAAE,EAAC,CAAC,GAAG,CAAC,IAAK,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAC;oEAClC,EAAE,EAAC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,EAAC;wEAElC;;;;;;;;;yGASiC;wEAEhC,IAAI,CAAC,KAAK,EAAE;oEACf,CAAC;gEACH,CAAC;;;;qDACF;;;;qCACF,CAAC;;;;yBACH,CAAC;;;;;aAIL,EAAC,aAAG;YACH,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAC,QAAQ,CAAC;QAC/C,CAAC,CAAC;IACN,CAAC;IAED,6BAAK,GAAL;QAEE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QAClB,IAAI,CAAC,YAAY,GAAG,IAAI;QACxB,IAAI,CAAC,YAAY,GAAG,IAAI;QACxB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,KAAK,GAAG,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5D,aAAa;IACf,CAAC;IAED,4BAAI,GAAJ;QACE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,YAAY,GAAG,KAAK;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,+CAA+C;QAC/C,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACnC,CAAC;IAED,+BAAO,GAAP;QAAA,iBA6CC;QA3CC,EAAE,EAAC,IAAI,CAAC,YAAY,CAAC,EAAC;YACpB,oCAAoC;YACpC,IAAM,OAAK,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAExC,+CAA+C;YAC/C,IAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,EAAE,CAAC;YACrD,EAAE,EAAC,IAAI,CAAC,GAAG,OAAR,IAAI,EAAQ,YAAY,IAAI,CAAC,CAAC,EAAC;gBAChC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,OAAK,CAAC;qBAC3B,IAAI,CAAC,UAAC,GAAG;oBACR,KAAI,CAAC,KAAK,EAAE;oBACZ,IAAM,UAAU,GAAG,GAAG,CAAC,UAAU;oBACjC,KAAI,CAAC,cAAc,GAAG,UAAU;oBAEhC,EAAE,EAAC,KAAI,CAAC,KAAK,KAAK,CAAC,IAAI,KAAI,CAAC,cAAc,KAAK,KAAI,CAAC,MAAM,CAAC,EAAC;wBAC1D,EAAE,EAAC,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,KAAK,KAAK,QAAQ,CAAC,EAAC;4BACvD,EAAE,EAAC,KAAI,CAAC,aAAa,KAAK,EAAE,CAAC,EAAC;gCAC5B,KAAI,CAAC,aAAa,IAAG,GAAG;4BAC1B,CAAC;wBACH,CAAC;wBAAA,IAAI,CAAC,EAAE,EAAC,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,KAAK,KAAK,OAAO,CAAC,EAAC;wBAE9D,CAAC;wBAAA,IAAI,EAAC;4BACJ,IAAI,WAAW,GAAG,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,KAAI,CAAC,aAAa,CAAC,MAAM,GAAE,CAAC,CAAC;4BAC5E,EAAE,EAAC,WAAW,KAAK,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,EAAC;gCAC1D,KAAI,CAAC,aAAa,IAAG,KAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,KAAK;4BAC9D,CAAC;wBACH,CAAC;wBAED,KAAI,CAAC,KAAK,GAAG,CAAC;oBAChB,CAAC;oBAAA,IAAI,CAAC,EAAE,EAAC,KAAI,CAAC,KAAK,KAAK,CAAC,CAAC,EAAC;wBACzB,KAAI,CAAC,KAAK,GAAG,CAAC;oBAChB,CAAC;oBAED,KAAI,CAAC,MAAM,GAAG,UAAU;gBAE1B,CAAC,CAAC;qBAED,IAAI,CAAC,cAAK,cAAK,CAAC,OAAO,EAAE,EAAf,CAAe,CAAC;YAC7B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,OAAK,CAAC,OAAO,EAAE;YACjB,CAAC;QACH,CAAC;QAED,IAAI,CAAC,KAAK,GAAG,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC9D,CAAC;IAED,mCAAW,GAAX;QACE,IAAI,CAAC,IAAI,EAAE;QACX,IAAI,CAAC,SAAS,CAAC,EAAC,OAAO,EAAE,UAAU,EAAC,CAAC;QACrC,EAAE,EAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;YACb,YAAY,CAAC,OAAO,CAAC,MAAM,EAAC,IAAI,CAAC,SAAS,CAAC,EAAC,KAAK,EAAE,CAAC,EAAC,CAAC,CAAC;QACzD,CAAC;IACH,CAAC;IAhaU,aAAa;QALzB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;yCA+BiB,6EAAiB;YAChB,wDAAa;YACf,+EAAkB;YAChB,sDAAM;YACL,8DAAc;YACb,wDAAU;OAnCnB,aAAa,CAkazB;IAAD,oBAAC;CAAA;AAlayB;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBe;AACM;AACE;AACH;AACmB;AACvB;AAW1C;IAAA;IAA0B,CAAC;IAAd,UAAU;QATtB,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,kEAAmB;gBACnB,4DAAY,CAAC,QAAQ,CAAC,uDAAU,CAAC;aAClC;YACD,YAAY,EAAE,CAAC,6DAAa,CAAC;SAC9B,CAAC;OACW,UAAU,CAAI;IAAD,iBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;AChByB;AAIzC,IAAM,UAAU,GAAW;IAChC;QACE,IAAI,EAAC,EAAE;QACP,SAAS,EAAE,6DAAa;KACzB;CACF","file":"client-demo-demo-module.js","sourcesContent":["module.exports = \"\"","module.exports = \"<div class=\\\"pd-20 bg-white border-radius-4 box-shadow mb-30 animated slideInUp\\\">\\r\\n  <div class=\\\"pre-loader\\\" *ngIf=\\\"loading\\\">Enviando y Esperando Respuesta</div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-3 col-sm-3\\\">\\r\\n      <div id=\\\"div_camera\\\" class=\\\"text-center\\\">\\r\\n        <video id=\\\"webcam\\\" width=\\\"227\\\" height=\\\"227\\\" style=\\\"display:none;\\\"></video>\\r\\n        <!-- \\r\\n        <canvas id=\\\"canvas\\\" width=\\\"227\\\" height=\\\"227\\\"></canvas>\\r\\n         -->\\r\\n      </div>\\r\\n      <div class=\\\"row no-gutters\\\">\\r\\n        <div class=\\\"col-md-12 col-sm-12 text-center\\\">\\r\\n          <button class=\\\"btn btn-secondary btn-circle\\\" [disabled]=\\\"btn_disabled\\\" (click)=\\\"start()\\\"><i class=\\\"fa fa-play\\\"></i></button>  \\r\\n          <button class=\\\"btn btn-secondary btn-circle\\\" [disabled]=\\\"btn_disabled1\\\" (click)=\\\"stop()\\\"><i class=\\\"fa fa-stop\\\"></i></button>  \\r\\n          <button type=\\\"button\\\" class=\\\"btn btn-danger btn-circle\\\" (click)=\\\"erase_character()\\\"><i class=\\\"fa fa-remove\\\"></i></button>\\r\\n          <button type=\\\"button\\\" class=\\\"btn btn-danger btn-circle\\\" (click)=\\\"clean_string()\\\"><i class=\\\"fa fa-trash\\\"></i></button>\\r\\n          <button type=\\\"button\\\" class=\\\"btn btn-success btn-circle\\\" (click)=\\\"send()\\\"><i class=\\\"fa fa-send\\\"></i></button>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"clearfix\\\"></div>\\r\\n      <br/>\\r\\n      <div class=\\\"col-md-12 col-sm-12\\\">Texto a Enviar: {{ string_output }}</div>\\r\\n      <div class=\\\"clearfix\\\"></div>\\r\\n      <br>\\r\\n      <div class=\\\"col-md-12 col-sm-12\\\">\\r\\n        <button type=\\\"button\\\" data-toggle=\\\"modal\\\" data-target=\\\"#modal_cuenta\\\" class=\\\"btn btn-primary btn-block\\\">Instrucciones</button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"col-md-9 col-sm-9\\\">\\r\\n      <div class=\\\"row no-gutters\\\">\\r\\n        <div class=\\\"col-md-6 col-sm-6 text-center\\\">\\r\\n          <h4 class=\\\"text-center\\\">Animación</h4>\\r\\n          <div id=\\\"tag_animacion\\\"></div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-6 col-sm-6 text-center\\\">\\r\\n          <h4 class=\\\"text-center\\\">Historial de Mensajes</h4>\\r\\n          <div class=\\\"text-center div_chat\\\">\\r\\n            <div [ngClass]=\\\"item.tipo == 1 ? 'alert alert-info sordo' : 'alert alert-danger empresa'\\\" *ngFor=\\\"let item of historial; let index = index\\\" style=\\\"opacity: 1;\\\">\\r\\n              {{ item.mensaje }}\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div id=\\\"modal_cuenta\\\" class=\\\"modal fade\\\" role=\\\"dialog\\\">\\r\\n    <div class=\\\"modal-dialog\\\">\\r\\n        <!-- Modal content-->\\r\\n        <div class=\\\"modal-content\\\">\\r\\n            <div class=\\\"modal-header login-header\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">×</button>\\r\\n                <h4 class=\\\"modal-title\\\"></h4>\\r\\n            </div>\\r\\n            <div class=\\\"modal-body\\\">\\r\\n              <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-md-12 col-sm-12\\\">\\r\\n                  <ul class=\\\"list-group\\\">\\r\\n                      <li class=\\\"list-group-flush\\\">\\r\\n                        <button class=\\\"btn btn-secondary btn-circle\\\"><i class=\\\"fa fa-play\\\"></i></button>&nbsp;&nbsp;Empezar uso de la Cámara\\r\\n                      </li>\\r\\n                      <li class=\\\"list-group-flush\\\">\\r\\n                        <button class=\\\"btn btn-secondary btn-circle\\\"><i class=\\\"fa fa-stop\\\"></i></button>&nbsp;&nbsp;Parar uso de la Cámara\\r\\n                      </li>\\r\\n                      <li class=\\\"list-group-flush\\\">\\r\\n                        <button class=\\\"btn btn-danger btn-circle\\\"><i class=\\\"fa fa-remove\\\"></i></button>&nbsp;&nbsp;Remover 1 Caracter del texto\\r\\n                      </li>\\r\\n                      <li class=\\\"list-group-flush\\\">\\r\\n                        <button class=\\\"btn btn-danger btn-circle\\\"><i class=\\\"fa fa-trash\\\"></i></button>&nbsp;&nbsp;Limpiar la cadena de texto\\r\\n                      </li>\\r\\n                      <li class=\\\"list-group-flush\\\">\\r\\n                        <button class=\\\"btn btn-success btn-circle\\\"><i class=\\\"fa fa-send\\\"></i></button>&nbsp;&nbsp;Mandar mensaje a la empresa\\r\\n                      </li>\\r\\n                    </ul>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div><!-- fin modal-body -->\\r\\n            <div class=\\\"modal-footer\\\">\\r\\n                <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\">Cerrar</button>\\r\\n            </div>\\r\\n        </div><!-- fin modal-content -->\\r\\n    </div><!-- fin modal-dialog -->\\r\\n</div> <!-- fin modal -->\\r\\n\"","import { Component, OnInit, OnDestroy,OnChanges, ElementRef } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router'\r\nimport { AnimationsService } from '../../service/animations.service'\r\nimport { InteractionService } from '../../service/interaction.service'\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { forkJoin } from 'rxjs'\r\nimport { environment } from '../../../environments/environment'\r\n\r\n\r\ndeclare var $ : any\r\ndeclare var knn_image_classifier : any\r\ndeclare var dl : any\r\ndeclare var compatibility : any\r\ndeclare var profiler: any\r\ndeclare var dat : any\r\ndeclare var jsfeat : any\r\ndeclare var profiler : any\r\n\r\n@Component({\r\n  selector: 'app-demo',\r\n  templateUrl: './demo.component.html',\r\n  styleUrls: ['./demo.component.css']\r\n})\r\nexport class DemoComponent implements OnInit, OnDestroy {\r\n\r\n  videoPlaying : boolean = false\r\n  video : any\r\n  knn : any\r\n  timer: any\r\n  registers: any[] = []\r\n  arreglo_elements : any[] = []\r\n  session : any\r\n  idEnterprise: string = \"\"\r\n  loading: boolean = false\r\n  classPredilect : number = 0\r\n  btn_disabled : boolean  = false\r\n  btn_disabled1 : boolean  = true\r\n  count: number = 0\r\n  backup : any = \"\"\r\n  historial : any[] = []\r\n  count_saliendo : number = 0;\r\n  string_output  : string = \"\"\r\n  rate : boolean = false\r\n  token : any = localStorage.getItem('token')\r\n  canvas : any\r\n  webcam : any\r\n  attempts: number = 0\r\n  stat = new profiler();\r\n  ctx : any\r\n  options: any\r\n  img_u8 : any\r\n\r\n  constructor(\r\n    private asvc : AnimationsService, \r\n    private toastr: ToastrService, \r\n    private isvc: InteractionService,\r\n    private router: Router,\r\n    private _router: ActivatedRoute,\r\n    private _eleRef : ElementRef\r\n    ) { \r\n    this.session = JSON.parse(localStorage.getItem('session'))\r\n    this.idEnterprise = this._router.snapshot.paramMap.get('id')\r\n    this.count_saliendo = 0;\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.appendVideo()\r\n    this.init()\r\n\r\n    //this.initFrame()\r\n    // socket \r\n    var obj = {type:2, profile: this.session.profile, correo: this.session.correo, enterprise_id: this.idEnterprise, message: 'typeconnection'}\r\n    this.sendWsMsg(obj)\r\n\r\n    this.isvc.messages.subscribe(res => {\r\n\r\n      if(res.type === \"enterpriseClient\"){\r\n        setTimeout(() => {\r\n          this.renderResponseClient(res.data.data)\r\n          this.sendWsMsg({'message': \"historial\"})\r\n        },2500)        \r\n      }\r\n\r\n      if(res.type === \"historial\"){\r\n        this.historial = res.data.mensj\r\n      }\r\n\r\n      if(res.type === \"exit\"){\r\n        this.count_saliendo++\r\n        if(this.count_saliendo === 1){\r\n          this.toastr.warning('La empresa se ha desconectado de la sesión','Información')\r\n          this.router.navigate(['/client/interaction'])\r\n        }\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  initFrame(){\r\n    this.canvas = this._eleRef.nativeElement.querySelector('#canvas')\r\n    this.webcam = this._eleRef.nativeElement.querySelector('#webcam')\r\n\r\n    this.readyListener()\r\n\r\n    this.webcam.addEventListener('loadeddata', this.readyListener.bind(this));\r\n\r\n    compatibility.getUserMedia({video: true, audio: false}, (stream) =>  {\r\n        try {\r\n            this.webcam.src = compatibility.URL.createObjectURL(stream);\r\n            this.webcam.addEventListener('playing', ()=> this.videoPlaying = true);\r\n            this.webcam.addEventListener('paused', ()=> this.videoPlaying = false);\r\n        } catch (error) {\r\n            this.webcam.src = stream;\r\n            this.webcam.addEventListener('playing', ()=> this.videoPlaying = true);\r\n            this.webcam.addEventListener('paused', ()=> this.videoPlaying = false);\r\n        }\r\n        setTimeout(() =>{\r\n          this.webcam.play();\r\n        }, 500);\r\n    }, function (error) {\r\n        $('#canvas').hide();\r\n        $('#log').hide();\r\n        $('#no_rtc').html('<h4>WebRTC not available.</h4>');\r\n        $('#no_rtc').show();\r\n    });\r\n  }\r\n\r\n  readyListener(){\r\n    this.findVideoSize()\r\n  }\r\n\r\n  findVideoSize(){\r\n    if(this.webcam.videoWidth > 0 && this.webcam.videoHeight > 0) {\r\n        this.webcam.removeEventListener('loadeddata', this.readyListener);\r\n        this.onDimensionsReady(this.webcam.videoWidth, this.webcam.videoHeight);\r\n    } else {\r\n        if(this.attempts < 10) {\r\n            this.attempts++;\r\n            setTimeout(this.findVideoSize.bind(this), 200);\r\n        } else {\r\n            this.onDimensionsReady(227, 227);\r\n        }\r\n    }\r\n  }\r\n\r\n  onDimensionsReady(width:number, height: number){\r\n\r\n      var canvasWidth  = this.canvas.width;\r\n      var canvasHeight = this.canvas.height;\r\n      this.ctx = this.canvas.getContext('2d');\r\n\r\n      this.ctx.fillStyle = \"rgb(0,255,0)\";\r\n      this.ctx.strokeStyle = \"rgb(0,255,0)\";\r\n\r\n      this.img_u8 = new jsfeat.matrix_t(227, 227, jsfeat.U8C1_t);\r\n\r\n      //var gui = new dat.GUI();\r\n\r\n      var demo_opt = function(){\r\n          this.blur_radius = 2;\r\n          this.low_threshold = 20;\r\n          this.high_threshold = 50;\r\n      }\r\n\r\n      this.options = new demo_opt()\r\n\r\n      //gui.add(this.options, 'blur_radius', 0, 4).step(1);\r\n      //gui.add(this.options, 'low_threshold', 1, 127).step(1);\r\n      //gui.add(this.options, 'high_threshold', 1, 127).step(1);\r\n\r\n      this.stat.add(\"grayscale\");\r\n      this.stat.add(\"gauss blur\");\r\n      this.stat.add(\"canny edge\");\r\n      compatibility.requestAnimationFrame(this.tick.bind(this));\r\n\r\n  }\r\n\r\n  tick() {\r\n    compatibility.requestAnimationFrame(this.tick.bind(this));\r\n\r\n    this.stat.new_frame();\r\n\r\n    if (this.webcam.readyState === this.webcam.HAVE_ENOUGH_DATA) {\r\n        this.ctx.drawImage(this.webcam, 0, 0, 227, 227);\r\n        var imageData = this.ctx.getImageData(0, 0, 227, 227);\r\n\r\n        this.stat.start(\"grayscale\");\r\n        jsfeat.imgproc.grayscale(imageData.data, 227, 227, this.img_u8);\r\n        this.stat.stop(\"grayscale\");\r\n\r\n        var r = this.options.blur_radius|0;\r\n        var kernel_size = (r+1) << 1;\r\n\r\n        this.stat.start(\"gauss blur\");\r\n        jsfeat.imgproc.gaussian_blur(this.img_u8, this.img_u8, kernel_size, 0);\r\n        this.stat.stop(\"gauss blur\");\r\n\r\n        this.stat.start(\"canny edge\");\r\n        jsfeat.imgproc.canny(this.img_u8, this.img_u8, this.options.low_threshold|0, this.options.high_threshold|0);\r\n        this.stat.stop(\"canny edge\");\r\n\r\n        // render result back to canvas\r\n        var data_u32 = new Uint32Array(imageData.data.buffer);\r\n        var alpha = (0xff << 24);\r\n        var i = this.img_u8.cols*this.img_u8.rows, pix = 0;\r\n        while(--i >= 0) {\r\n            pix = this.img_u8.data[i];\r\n            data_u32[i] = alpha | (pix << 16) | (pix << 8) | pix;\r\n        }\r\n\r\n        this.ctx.putImageData(imageData, 0, 0);\r\n\r\n        var image = document.createElement('img')\r\n            image.crossOrigin = \"Anonymous\"\r\n            image.width = 227\r\n            image.height = 227\r\n            image.src = this.ctx.canvas.toDataURL(\"image/png\");\r\n\r\n            image.onload = async () => {\r\n              this.animate()\r\n            }\r\n    }\r\n  }\r\n\r\n  appendVideo(){\r\n    this.video = document.createElement('video');\r\n    this.video.setAttribute('autoplay', '');\r\n    this.video.setAttribute('playsinline', '');    \r\n\r\n    $('#div_camera').append(this.video)\r\n    //document.body.appendChild(this.video);\r\n\r\n    navigator.mediaDevices.getUserMedia({video: true, audio: false})\r\n    .then((stream) => {\r\n      this.video.srcObject = stream;\r\n      this.video.width = 227;\r\n      this.video.height = 227;\r\n\r\n      this.video.addEventListener('playing', ()=> this.videoPlaying = true);\r\n      this.video.addEventListener('paused', ()=> this.videoPlaying = false);\r\n    })\r\n  }\r\n\r\n\r\n\r\n  sendWsMsg(data){\r\n    this.isvc.sendMsg(data)\r\n  }\r\n\r\n  renderResponseClient(data){\r\n\r\n    console.log(data)\r\n    const ruta_audio = environment.url+\"animation/\"+data.audio\r\n\r\n    var html = `<h3>${data.texto}</h3>`\r\n    \r\n    var html_img = `<img src=\"${environment.url}animation/${data.imagen}\" width=\"50%\" />`\r\n\r\n    $('#tag_audio').empty()\r\n    $('#tag_audio').html(html)\r\n    $('#tag_animacion').html()\r\n    $('#tag_animacion').html(html_img)\r\n\r\n    this.loading = false\r\n\r\n    this.btn_disabled = false\r\n\r\n  }\r\n\r\n  erase_character(){\r\n    this.string_output = this.string_output.substring(0,this.string_output.length -1)\r\n  }\r\n\r\n  clean_string(){\r\n   this.string_output = \"\" \r\n  }\r\n\r\n  send(){\r\n    if(this.string_output.length > 0){\r\n      this.sendWsMsg({ message: \"clientEnterprise\",  data: this.string_output})\r\n      setTimeout(() => {\r\n        this.sendWsMsg({'message': \"historial\"})\r\n      },500)\r\n      this.stop()\r\n    }else{\r\n       this.toastr.error('Debe crear una oración mediante la cámara')\r\n    }\r\n  }\r\n\r\n\r\n  init(){\r\n\r\n      var self = this\r\n\r\n      const imagesInteraction = this.asvc.getImagesInteraction()\r\n      const validateRate      = this.isvc.rateGet(this.token)\r\n      forkJoin([\r\n        imagesInteraction,\r\n        validateRate\r\n      ]).subscribe( async res => {\r\n\r\n        this.registers = res[0]\r\n        this.rate = res[1].rate\r\n\r\n        if(this.registers.length > 0){  \r\n\r\n          if (dl == null) {\r\n            await new Promise(resolve => setTimeout(resolve, 1000));\r\n          }\r\n\r\n          this.knn = new knn_image_classifier.KNNImageClassifier(self.registers.length, 30);\r\n          await this.knn.load();\r\n\r\n          var con = 0;\r\n          var con1 = 0;\r\n\r\n\r\n          this.registers.forEach( async function(i,e){\r\n            i.animationImg.forEach(async function(i2,e2){\r\n\r\n              var imageUrl = `${environment.url}animationImagen/${i2.ruta_imagen}` \r\n\r\n              var image = document.createElement('img')\r\n              image.crossOrigin = \"Anonymous\"\r\n              image.width = 227\r\n              image.height = 227\r\n              image.id = `image_${con1}`\r\n              image.dataset.id_animacion = `${con}`\r\n              image.src = imageUrl\r\n\r\n              image.onload = async () => {\r\n                var image_pixel = dl.fromPixels(image)\r\n                await self.knn.addImage(image_pixel, e);\r\n                \r\n                if(e2 + 1 == i.animationImg.length){\r\n                  self.arreglo_elements.push(self.registers[e])\r\n                }\r\n\r\n                if(e + 1  == self.registers.length){\r\n                  if(e2 + 1 == i.animationImg.length){\r\n\r\n                    /*var image_pixel2;\r\n                    \r\n                    image_pixel2 = dl.fromPixels(dog2)\r\n\r\n                    const prediction = await self.knn.predictClass(image_pixel2);\r\n                    const indexClass = prediction.classIndex\r\n                    console.log(prediction)\r\n                    console.log(self.registers[indexClass])\r\n\r\n                    alert(prediction.classIndex+1) */\r\n\r\n                     self.start()\r\n                  }\r\n                }\r\n              }\r\n            })\r\n          })\r\n\r\n        }\r\n\r\n      },err => {\r\n        this.toastr.error(err.error.message,'Error!')\r\n      })\r\n  }\r\n\r\n  start(){\r\n    \r\n    this.video.play();\r\n    this.videoPlaying = true\r\n    this.btn_disabled = true\r\n    this.btn_disabled1 = false;\r\n    this.timer = requestAnimationFrame(this.animate.bind(this));\r\n    //this.tick()\r\n  }\r\n\r\n  stop(){\r\n    this.video.pause();\r\n    this.videoPlaying = false\r\n    this.btn_disabled1 = true;\r\n    this.btn_disabled = false;\r\n    //compatibility.cancelAnimationFrame(this.tick)\r\n    cancelAnimationFrame(this.timer);\r\n  }\r\n\r\n  animate(){\r\n\r\n    if(this.videoPlaying){\r\n      // Get image data from video element\r\n      const image = dl.fromPixels(this.video);\r\n\r\n      // If any examples have been added, run predict\r\n      const exampleCount = this.knn.getClassExampleCount();\r\n      if(Math.max(...exampleCount) > 0){\r\n        this.knn.predictClass(image)\r\n        .then((res)=>{\r\n          this.count++\r\n          const indexClass = res.classIndex\r\n          this.classPredilect = indexClass\r\n          \r\n          if(this.count === 1 && this.classPredilect !== this.backup){\r\n            if(this.arreglo_elements[indexClass].texto === \"_vacio\"){\r\n              if(this.string_output !== \"\"){\r\n                this.string_output+= \" \"\r\n              }\r\n            }else if(this.arreglo_elements[indexClass].texto === \"_nada\"){\r\n              \r\n            }else{\r\n              let last_letter = this.string_output.substring(this.string_output.length -1)\r\n              if(last_letter !== this.arreglo_elements[indexClass].texto){\r\n                this.string_output+= this.arreglo_elements[indexClass].texto\r\n              }\r\n            }\r\n\r\n            this.count = 0\r\n          }else if(this.count === 1){\r\n            this.count = 0\r\n          }\r\n          \r\n          this.backup = indexClass\r\n\r\n        })\r\n        // Dispose image when done\r\n        .then(()=> image.dispose())\r\n      } else {\r\n        image.dispose()\r\n      }\r\n    }\r\n\r\n    this.timer = requestAnimationFrame(this.animate.bind(this));\r\n  }\r\n\r\n  ngOnDestroy(){\r\n    this.stop()\r\n    this.sendWsMsg({message: \"saliendo\"})\r\n    if(!this.rate){\r\n      localStorage.setItem('rate',JSON.stringify({value: 1}))\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DemoComponent } from './demo.component';\r\nimport { RouterModule } from '@angular/router'\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms'\r\nimport { DemoRoutes } from './demo.routes'\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    RouterModule.forChild(DemoRoutes)\r\n  ],\r\n  declarations: [DemoComponent]\r\n})\r\nexport class DemoModule { }\r\n","import { DemoComponent } from './demo.component'\r\nimport { Routes } from '@angular/router'\r\n\r\n\r\nexport const DemoRoutes: Routes = [\r\n  {\r\n    path:'',\r\n    component: DemoComponent\r\n  }\r\n]"],"sourceRoot":""}