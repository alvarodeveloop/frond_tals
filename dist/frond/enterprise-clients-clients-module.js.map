{"version":3,"sources":["webpack:///./src/app/enterprise/clients/clients.component.css","webpack:///./src/app/enterprise/clients/clients.component.html","webpack:///./src/app/enterprise/clients/clients.component.ts","webpack:///./src/app/enterprise/clients/clients.module.ts","webpack:///./src/app/enterprise/clients/clients.route.ts","webpack:///./src/app/enterprise/clients/form/form.component.css","webpack:///./src/app/enterprise/clients/form/form.component.html","webpack:///./src/app/enterprise/clients/form/form.component.ts"],"names":[],"mappings":"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","file":"enterprise-clients-clients-module.js","sourcesContent":["module.exports = \"\"","module.exports = \"<div class=\\\"pd-20 bg-white border-radius-4 box-shadow mb-30 animated slideInUp\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    \\r\\n    <div class=\\\"col-md-5 col-sm-5 text-center offset-md-3\\\">\\r\\n      <h3>Clientes Registrados</h3> \\r\\n    </div>\\r\\n    <div class=\\\"col-md-4 col-sm-4 pull-right\\\">\\r\\n      <a routerLink=\\\"/enterprise/clients/form\\\" routerLinkActive=\\\"active\\\" class=\\\"btn btn-primary\\\" style=\\\"border-radius: 100%\\\" title=\\\"nuevo registro\\\" data-toggle=\\\"tooltip\\\"><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"clearfix\\\"></div>\\r\\n  <br>\\r\\n  <div class=\\\"row\\\">\\r\\n    <table class=\\\"data-table stripe hover nowrap table\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th class=\\\"text-center\\\">Usuario</th>\\r\\n          <th class=\\\"text-center\\\">Correo</th>\\r\\n          <th class=\\\"text-center\\\">Activo</th>\\r\\n          <th class=\\\"text-center\\\">Online</th>\\r\\n          <th class=\\\"text-center\\\">Acción</th>\\r\\n        </tr>\\r\\n      </thead>\\r\\n      <tbody class=\\\"text-center\\\">\\r\\n      </tbody>\\r\\n    </table>\\r\\n  </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { Clients } from '../../class/enterprise/clients'\r\nimport { Router } from '@angular/router'\r\nimport { ClientsService } from '../../service/clients.service'\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\ndeclare var $ : any\r\n\r\n@Component({\r\n  selector: 'app-clients',\r\n  templateUrl: './clients.component.html',\r\n  styleUrls: ['./clients.component.css']\r\n})\r\nexport class ClientsComponent implements OnInit {\r\n\r\n  clients: Clients[] = []\r\n\r\n  constructor(private router: Router, private csvc: ClientsService, private tostr: ToastrService) { }\r\n\r\n  ngOnInit() {  \r\n    this.init()\r\n  }\r\n\r\n  init(){\r\n    this.csvc.get().subscribe(res => {\r\n      this.clients = res\r\n      this.renderTable()\r\n    }, err => {\r\n      this.tostr.error(err.error.message,'Error!')\r\n    })\r\n  }\r\n\r\n  renderTable(){\r\n    if($.fn.DataTable.isDataTable('.data-table')){\r\n      $('.data-table').DataTable().destroy()\r\n    }\r\n\r\n    $('.data-table').dataTable({\r\n      data: this.clients,\r\n      columns: [\r\n        {\"data\": \"nombre\"},\r\n        {\"data\": \"correo\"},\r\n        {\"data\": \"statu_id\", \"render\": function(statu_id){\r\n          return statu_id == 1 ? \"Activo\" : \"Desactivado\"\r\n        }},\r\n        {\"data\": \"statu_id\", \"render\": function(statu_id){\r\n          return statu_id == 1 ? \"Online\" : \"Off-line\"\r\n        }},\r\n        {\"data\": \"id\", \"render\": function(id){\r\n          return `<button class=\"btn btn-link btn_editar\" title=\"Editar\" data-toggle=\"tooltip\">\r\n                      <img src=\"../../../../assets/images/editar.png\" width=\"30px\"\r\n                      </button>\r\n                      <button class=\"btn btn-link btn_destroy\" title=\"Eliminar\" data-toggle=\"tooltip\">\r\n                      <img src=\"../../../../assets/images/eliminar.png\" width=\"30px\"\r\n                      </button>`;\r\n        }}\r\n      ],\r\n      rowCallback: (row: Node, data: any[] | Object, index: number) => {\r\n          const self = this;\r\n          // Unbind first in order to avoid any duplicate handler\r\n          // (see https://github.com/l-lin/angular-datatables/issues/87)\r\n          $('td', row).unbind('click');\r\n          $('td > .btn_editar', row).bind('click', () => {\r\n            self.editRegister(data);\r\n          });\r\n\r\n          $('td > .btn_destroy', row).bind('click', () => {\r\n            self.deleteRegister(data);\r\n          });\r\n\r\n          return row;\r\n      }\r\n    })\r\n  }\r\n\r\n  editRegister(data){\r\n    this.router.navigate(['/enterprise/clients/form/',data.id])\r\n  }\r\n\r\n  deleteRegister(data){\r\n    if(confirm('Esta seguro que desea eliminar este registro?')){\r\n      this.csvc.delete(data.id).subscribe(res => {\r\n        this.tostr.success('Proceso Completado','Éxito!')\r\n        this.init()\r\n      }, err => {\r\n        this.tostr.error(err.error.message,'Error!')\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router'\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'\r\n\r\nimport { ClientsComponent } from './clients.component';\r\n \r\nimport { ClientsRoutes } from './clients.route';\r\nimport { FormComponent } from './form/form.component'\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(ClientsRoutes),\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [ClientsComponent, FormComponent]\r\n})\r\nexport class ClientsModule { }\r\n","import { Routes } from '@angular/router'\r\n\r\nimport { ClientsComponent } from './clients.component'\r\nimport { FormComponent } from './form/form.component'\r\n\r\nexport const ClientsRoutes : Routes = [\r\n    {\r\n      path: '',\r\n      component: ClientsComponent\r\n    },\r\n    {\r\n      path: 'form',\r\n      component: FormComponent\r\n    },\r\n    {\r\n      path: 'form/:id',\r\n      component: FormComponent\r\n    }\r\n]","module.exports = \"\"","module.exports = \"<div class=\\\"pd-20 bg-white border-radius-4 box-shadow mb-30 animated slideInRight\\\">\\r\\n  <div class=\\\"col-md-12 col-sm-12 col-lg-12 col-12\\\">\\r\\n    <form [formGroup]=\\\"formClient\\\" action=\\\"\\\" (ngSubmit)=\\\"onSubmit(formClient)\\\">\\r\\n      <div class=\\\"row form-group\\\">\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-6\\\">\\r\\n          <label for=\\\"\\\" class=\\\"form-control-label\\\">Correo</label>\\r\\n          <input type=\\\"email\\\" class=\\\"form-control\\\" formControlName=\\\"correo\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.correo.errors }\\\">\\r\\n          <div *ngIf=\\\"f.correo.errors\\\" class=\\\"invalid-feedback\\\">\\r\\n              <div *ngIf=\\\"f.correo.errors.required\\\">El Correo es requerido</div>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"f.correo.errors\\\" class=\\\"invalid-feedback\\\">\\r\\n              <div *ngIf=\\\"f.correo.errors.email\\\">El campo debe contener un correo valido</div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-12\\\">\\r\\n          <label for=\\\"\\\" class=\\\"form-control-label\\\">Nombre Usuario</label>\\r\\n          <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"nombre\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.nombre.errors }\\\">\\r\\n          <div *ngIf=\\\"f.nombre.errors\\\" class=\\\"invalid-feedback\\\">\\r\\n              <div *ngIf=\\\"f.nombre.errors.required\\\">El Nombre de Usuario es requerido</div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row form-group\\\">\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-6\\\">\\r\\n          <label for=\\\"\\\" class=\\\"form-control-label\\\">Password</label>\\r\\n          <input type=\\\"password\\\" class=\\\"form-control\\\" id=\\\"password\\\">\\r\\n        </div>\\r\\n        <div class=\\\"col-md-5 col-sm-5 col-12 offset-md-1 offset-sm-1 custom-control custom-checkbox mb-5\\\" *ngIf=\\\"registerById\\\">\\r\\n          <input type=\\\"checkbox\\\" class=\\\"custom-control-input\\\" formControlName=\\\"statu_id\\\" id=\\\"statu_id\\\" id=\\\"changeStatu\\\" [checked]=\\\"registerById.statu_id == 1\\\" (click)=\\\"changeStatus($event)\\\">\\r\\n          <label for=\\\"changeStatu\\\" class=\\\"custom-control-label\\\">Estado</label>\\r\\n          <br>\\r\\n          <label for=\\\"changeStatu\\\" class=\\\"custom-control-label\\\">{{ nameStatus }}</label>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row form-group\\\">\\r\\n        <div class=\\\"col-md-4 col-sm-4 col-12 offset-md-2 offset-sm-2\\\">\\r\\n          <button class=\\\"btn btn-outline-success btn-block\\\">Enviar&nbsp;<i class=\\\"fa fa-send\\\"></i></button>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-4 col-sm-4 col-12\\\">\\r\\n          <a routerLink=\\\"/enterprise/clients\\\"  class=\\\"btn btn-outline-primary btn-block\\\">Cancelar&nbsp;<i class=\\\"fa fa-remove\\\"></i></a>\\r\\n        </div>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Clients } from '../../../class/enterprise/clients'\r\nimport { Router, ActivatedRoute } from '@angular/router'\r\nimport { ClientsService } from '../../../service/clients.service'\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\ndeclare var $ : any\r\n\r\n@Component({\r\n  selector: 'app-form',\r\n  templateUrl: './form.component.html',\r\n  styleUrls: ['./form.component.css']\r\n})\r\nexport class FormComponent implements OnInit {\r\n\r\n  formClient : FormGroup\r\n  submitted : boolean = false\r\n  registerById: Clients\r\n  edit: Boolean = false\r\n  nameStatus: String\r\n\r\n  constructor( private _fb: FormBuilder, \r\n              private csvc: ClientsService, \r\n              private router: Router,\r\n              private _route: ActivatedRoute,\r\n              private toastr: ToastrService) { \r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.initForm()\r\n     \r\n     const id = this._route.snapshot.paramMap.get('id');\r\n     if(id){\r\n       this.csvc.findById(id).subscribe(res => {\r\n         this.registerById = res\r\n         if(res.tipo_profile_id){\r\n           this.edit = true\r\n         }\r\n         this.nameStatus = res.statu_id == 1 ?  \"Activo\" : \"Desactivado\";\r\n         this.initForm(this.registerById)  \r\n       })\r\n     }\r\n  }\r\n\r\n  initForm(clients?: Clients){\r\n    this.formClient = this._fb.group({\r\n      id: [clients ? clients.id : null],\r\n      correo: [clients ? clients.correo : null, [Validators.required,Validators.email] ],\r\n      nombre: [clients ? clients.nombre : null, Validators.required ],\r\n      statu_id: [clients ? clients.statu_id : null]\r\n    })\r\n  }\r\n\r\n  get f(){ return this.formClient.controls }\r\n\r\n  onlyNubers(value){\r\n\r\n    var val = value.target.value,\r\n        elem = value.target.getAttribute(\"formControlName\")\r\n\r\n    if(isNaN(val)){\r\n      var val = val.substring(0,val.length - 1)\r\n      $('#'+elem).val(val) \r\n    }\r\n  }\r\n\r\n  changeStatus(e){\r\n    if(e.target.checked){\r\n      this.nameStatus = \"Activo\"\r\n    }else{\r\n      this.nameStatus = \"Desactivado\"\r\n    }\r\n  }\r\n\r\n  onSubmit(data){\r\n\r\n    this.submitted = true\r\n\r\n    data = JSON.parse(JSON.stringify(data.value))\r\n\r\n    if (this.formClient.invalid) {\r\n        \r\n        if($('#password').val() === \"\" && !this.edit){\r\n          this.toastr.warning('La contraseña no puede estar vacia','Información!')\r\n        }\r\n\r\n        return;\r\n    } \r\n    \r\n    if(data.id){\r\n      \r\n      if($('#password').val() !== \"\"){\r\n        data.password = $('#password').val()\r\n      }\r\n\r\n      this.csvc.update(data).subscribe(res => {\r\n        this.toastr.success('El cliente ha sido modificado con éxito', 'Éxito!')\r\n        this.router.navigate(['/enterprise/clients'])\r\n      },err => {\r\n        this.toastr.error(err.error.message, 'Error!')\r\n      })\r\n    }else{\r\n      \r\n      if($('#password').val() === \"\"){\r\n        this.toastr.warning('La contraseña no puede estar vacia','Información!')\r\n        return false\r\n      }\r\n\r\n      data.password = $('#password').val()\r\n\r\n      this.csvc.stored(data).subscribe(res => {\r\n        this.toastr.success('El cliente ha sido registrado con éxito', 'Éxito!')\r\n        this.router.navigate(['/enterprise/clients'])\r\n      },err => {\r\n        this.toastr.error(err.error.message, 'Error!')\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}