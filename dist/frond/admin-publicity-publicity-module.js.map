{"version":3,"sources":["webpack:///./src/app/admin/publicity/form/form.component.css","webpack:///./src/app/admin/publicity/form/form.component.html","webpack:///./src/app/admin/publicity/form/form.component.ts","webpack:///./src/app/admin/publicity/publicity.component.css","webpack:///./src/app/admin/publicity/publicity.component.html","webpack:///./src/app/admin/publicity/publicity.component.ts","webpack:///./src/app/admin/publicity/publicity.module.ts","webpack:///./src/app/admin/publicity/publicity.routes.ts"],"names":[],"mappings":"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","file":"admin-publicity-publicity-module.js","sourcesContent":["module.exports = \"\"","module.exports = \"<div class=\\\"pd-20 bg-white border-radius-4 box-shadow mb-30 animated slideInRight\\\">\\r\\n  <div class=\\\"col-md-12 col-sm-12 col-lg-12 col-12\\\">\\r\\n    <form [formGroup]=\\\"formPublicity\\\" action=\\\"\\\" (ngSubmit)=\\\"onSubmit(formPublicity)\\\">\\r\\n      <div class=\\\"row form-group\\\">\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-6\\\">\\r\\n          <label for=\\\"\\\" class=\\\"form-control-label\\\">Nombre</label>\\r\\n          <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"name\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.name.errors }\\\">\\r\\n          <div *ngIf=\\\"f.name.errors\\\" class=\\\"invalid-feedback\\\">\\r\\n              <div *ngIf=\\\"f.name.errors.required\\\">El nombre es requerido</div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-6\\\">\\r\\n          <label for=\\\"\\\" class=\\\"form-control-label\\\">Tipo</label>\\r\\n          <select name=\\\"type\\\" id=\\\"type\\\" class=\\\"form-control\\\" formControlName=\\\"type\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.type.errors }\\\">\\r\\n            <option value=\\\"\\\">Seleccione...</option>\\r\\n            <option value=\\\"1\\\">Impositiva</option>\\r\\n            <option value=\\\"2\\\">Libre</option>\\r\\n          </select>\\r\\n          <div *ngIf=\\\"f.type.errors\\\" class=\\\"invalid-feedback\\\">\\r\\n            <div *ngIf=\\\"f.type.errors.required\\\">El tipo es requerido</div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row form-group\\\">\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-6\\\">\\r\\n          <label for=\\\"\\\" class=\\\"form-control-label\\\">Imagen</label>\\r\\n          <input type=\\\"file\\\" class=\\\"\\\" id=\\\"publicity\\\" name=\\\"publicity\\\">\\r\\n        </div>\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-6 text-center\\\" *ngIf=\\\"registerById\\\">\\r\\n          <img [src]=\\\"url+'publicity/'+registerById.image\\\" alt=\\\"\\\" width=\\\"120px\\\" height=\\\"120px\\\">\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row form-group\\\" *ngIf=\\\"registerById\\\">\\r\\n        <div class=\\\"col-md-6 col-sm-6 col-6 offset-md-1 offset-sm-1 offset-1 custom-control custom-checkbox mb-5\\\">\\r\\n          <input type=\\\"checkbox\\\" class=\\\"custom-control-input\\\" formControlName=\\\"statu\\\" id=\\\"statu\\\" id=\\\"changeStatu\\\" [checked]=\\\"registerById.statu\\\" (click)=\\\"changeStatus($event)\\\">\\r\\n          <label for=\\\"changeStatu\\\" class=\\\"custom-control-label\\\">Estado</label>\\r\\n          <br>\\r\\n          <label for=\\\"changeStatu\\\" class=\\\"custom-control-label\\\">{{ nameStatus }}</label>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row form-group\\\">\\r\\n        <div class=\\\"col-md-12 col-sm-12 col-12\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-4 col-sm-4 col-12 offset-md-2 offset-sm-2\\\">\\r\\n              <button class=\\\"btn btn-outline-success btn-block\\\">Enviar&nbsp;<i class=\\\"fa fa-send\\\"></i></button>\\r\\n            </div>\\r\\n            <div class=\\\"col-md-4 col-sm-4 col-12\\\">\\r\\n              <a routerLink=\\\"/admin/publicity\\\"  class=\\\"btn btn-outline-primary btn-block\\\">Cancelar&nbsp;<i class=\\\"fa fa-remove\\\"></i></a>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, ElementRef } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router'\r\nimport { Publicity } from '../../../class/admin/publicity'\r\nimport { environment } from '../../../../environments/environment'\r\n\r\nimport { PublicityService } from '../../../service/publicity.service'\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\ndeclare var $ : any\r\n\r\n@Component({\r\n  selector: 'app-form',\r\n  templateUrl: './form.component.html',\r\n  styleUrls: ['./form.component.css']\r\n})\r\nexport class FormComponent implements OnInit {\r\n\r\n  formPublicity : FormGroup\r\n  submitted : Boolean = false\r\n  registerById: Publicity\r\n  url : String = environment.url\r\n  nameStatus: String\r\n\r\n  constructor(\r\n    private psvc : \r\n    PublicityService, \r\n    private _fb: FormBuilder, \r\n    private router: Router, \r\n    private _router: ActivatedRoute,\r\n    private toastr: ToastrService,\r\n    private _ele: ElementRef) { }\r\n\r\n  ngOnInit() {\r\n\r\n    this.initForm()\r\n\r\n    const id = this._router.snapshot.paramMap.get('id');\r\n     if(id){\r\n       this.psvc.findById(id).subscribe(res => {\r\n         this.registerById = res\r\n         \r\n         this.nameStatus = this.registerById.statu ? \"Activa\" : \"Desactivada\"\r\n\r\n         this.initForm(this.registerById)  \r\n       })\r\n     }\r\n  }\r\n\r\n  initForm(row?: Publicity){\r\n    this.formPublicity = this._fb.group({\r\n      id:   [row ? row.id : null],\r\n      name: [row ? row.name : null, Validators.required],\r\n      type: [row ? row.type : '', Validators.required],\r\n      statu:[row ? row.statu : true]\r\n    })\r\n  }\r\n\r\n  get f(){\r\n    return this.formPublicity.controls\r\n  }\r\n\r\n  changeStatus(e){\r\n    if(e.target.checked){\r\n      this.nameStatus = \"Activa\"\r\n    }else{\r\n      this.nameStatus = \"Desactivada\"\r\n    }\r\n  }\r\n\r\n  onSubmit(data){\r\n    const datos = JSON.parse(JSON.stringify(data.value))\r\n\r\n    this.submitted = true\r\n    if(this.formPublicity.invalid){\r\n      return;\r\n    }\r\n\r\n    var image = this._ele.nativeElement.querySelector('#publicity').files[0]\r\n    \r\n    let formData = new FormData()\r\n    \r\n    formData.append('name',datos.name)\r\n    formData.append('statu',datos.statu)\r\n    formData.append('type',datos.type)\r\n    formData.append('id',datos.id)\r\n\r\n    if(datos.id){\r\n      if(image !== undefined && image !== null){\r\n        formData.append('publicity',image,image.name)\r\n      }\r\n\r\n      this.psvc.update(formData,datos.id).subscribe(res => {\r\n        this.toastr.success('Registro modificado','Éxito')\r\n        this.router.navigate(['/admin/publicity']);\r\n      }, err => {\r\n        this.toastr.success(err.error.message,'Error!')\r\n      })\r\n\r\n    }else{\r\n      \r\n      if(image === undefined){\r\n        this.toastr.warning('Debe escoger una imagen','Información!')\r\n        return false\r\n      }\r\n\r\n      \r\n      formData.append('publicity',image,image.name)\r\n\r\n      \r\n      this.psvc.stored(formData).subscribe(res => {\r\n        this.toastr.success('Registro Agregado','Éxito')\r\n        this.router.navigate(['/admin/publicity']);\r\n      }, err => {\r\n        this.toastr.success(err.error.message,'Error!')\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n","module.exports = \"\"","module.exports = \"<div class=\\\"pd-20 bg-white border-radius-4 box-shadow mb-30 animated slideInUp\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-5 col-sm-5 text-center offset-md-3\\\">\\r\\n      <h3>Publicidades Registradas</h3> \\r\\n    </div>\\r\\n    <div class=\\\"col-md-4 col-sm-4 pull-right\\\">\\r\\n\\r\\n      <a routerLink=\\\"/admin/publicity/form\\\" routerLinkActive=\\\"active\\\" class=\\\"btn btn-primary\\\" style=\\\"border-radius: 100%\\\" title=\\\"nuevo registro\\\"><i class=\\\"fa fa-plus\\\"></i></a>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"clearfix\\\"></div>\\r\\n  <br>\\r\\n  <div class=\\\"row\\\">\\r\\n    <table class=\\\"data-table stripe hover nowrap table\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th class=\\\"text-center\\\">Imagen</th>\\r\\n          <th class=\\\"text-center\\\">Nombre</th>\\r\\n          <th class=\\\"text-center\\\">Tipo Publicidad:</th>\\r\\n          <th class=\\\"text-center\\\">Empresas Asociadas:</th>\\r\\n          <th class=\\\"text-center\\\">Acciones:</th>\\r\\n        </tr>\\r\\n      </thead>\\r\\n      <tbody class=\\\"text-center\\\">\\r\\n      </tbody>\\r\\n    </table>\\r\\n  </div>\\r\\n</div>\"","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { PublicityService } from '../../service/publicity.service'\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\nimport { Router } from '@angular/router'\r\nimport { Publicity } from '../../class/admin/publicity'\r\nimport { environment } from '../../../environments/environment'\r\n\r\n\r\ndeclare var $ : any;\r\n\r\n@Component({\r\n  selector: 'app-publicity',\r\n  templateUrl: './publicity.component.html',\r\n  styleUrls: ['./publicity.component.css']\r\n})\r\nexport class PublicityComponent implements OnInit {\r\n\r\n  publicitys : Publicity[] = []\r\n\r\n  constructor(private _router: Router, private psvc: PublicityService, private toastr: ToastrService) { }\r\n\r\n  ngOnInit() {\r\n    $('[tool=\"tooltip\"]').tooltip()\r\n    this.init()\r\n  }\r\n\r\n  init(){\r\n    this.psvc.get().subscribe(res => {\r\n      this.publicitys = res\r\n\r\n      if($.fn.DataTable.isDataTable('.data-table')){\r\n        $('.data-table').DataTable().destroy()\r\n      }\r\n\r\n      $('.data-table').dataTable({\r\n        data: this.publicitys,\r\n        columns: [\r\n        {\"data\": 'image', \"render\" : function(image){\r\n          return `<img src=\"${environment.url}publicity/${image}\" width=\"80px\" height=\"80px\">`\r\n        }},\r\n        {\"data\": 'name'},\r\n        {\"data\": 'type',\"render\": function(type){\r\n          return type == 1 ? 'Impuesta' : 'Libre'\r\n        }},\r\n        {\"data\": \"publicidades\", \"render\": function(data){\r\n          return data.length\r\n        }},\r\n        {\"data\": 'id', \"render\": function(data){\r\n          var html = `<button class=\"btn btn-link btn_editar\" title=\"Editar\">\r\n                      <img src=\"../../../../assets/images/editar.png\" width=\"30px\"\r\n                      </button>\r\n                      <button class=\"btn btn-link btn_destroy\" title=\"Eliminar\">\r\n                      <img src=\"../../../../assets/images/eliminar.png\" width=\"30px\"\r\n                      </button>`\r\n          return html\r\n\r\n        }}\r\n        ],\r\n        rowCallback: (row: Node, data: any[] | Object, index: number) => {\r\n          const self = this;\r\n          // Unbind first in order to avoid any duplicate handler\r\n          // (see https://github.com/l-lin/angular-datatables/issues/87)\r\n          $('td', row).unbind('click');\r\n          $('td > .btn_editar', row).bind('click', () => {\r\n            self.editRegister(data);\r\n          });\r\n\r\n          $('td > .btn_destroy', row).bind('click', () => {\r\n            self.deleteRegister(data);\r\n          });\r\n          return row;\r\n        }\r\n      })\r\n\r\n    },err => {\r\n      alert(err.error.message)\r\n    })\r\n  }\r\n\r\n  editRegister(data){\r\n    this._router.navigate(['admin/publicity/form/',data.id])\r\n  }\r\n\r\n  deleteRegister(data){\r\n\r\n    if(confirm('Esta seguro de querer eleminar este registro')){\r\n      this.psvc.delete(data.id).subscribe(res => {\r\n        this.toastr.success('Registro eliminado', 'Éxito!')\r\n        this.init()\r\n      },err => {\r\n        this.toastr.error(err.error.message, 'Error!')\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router'\r\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms'\r\n\r\nimport { PublicityComponent } from './publicity.component';\r\nimport { PublicityRoutes } from './publicity.routes';\r\nimport { FormComponent } from './form/form.component'\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(PublicityRoutes),\r\n    FormsModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [PublicityComponent, FormComponent]\r\n})\r\nexport class PublicityModule { }\r\n","import { Routes } from '@angular/router'\r\n\r\nimport { PublicityComponent } from './publicity.component'\r\nimport { FormComponent } from './form/form.component'\r\n\r\nexport const PublicityRoutes : Routes = [\r\n    {\r\n      path: '',\r\n      component: PublicityComponent\r\n    },\r\n    {\r\n      path: 'form',\r\n      component: FormComponent\r\n    },\r\n    {\r\n      path: 'form/:id',\r\n      component: FormComponent\r\n    }\r\n]"],"sourceRoot":""}